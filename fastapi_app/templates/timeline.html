<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Memory Lane: Our Timeline - ShaiX2 Forever</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700&amp;display=swap"
        rel="stylesheet" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <script src="/static/js/theme.js"></script>
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "var(--color-primary)",
                        "background-light": "var(--color-bg-light)",
                        "background-dark": "var(--color-bg-dark)",
                        "paper-texture": "var(--color-bg-light)", // Map paper texture to light bg for now to adapt to themes
                    },
                    fontFamily: {
                        "display": ["Plus Jakarta Sans", "sans-serif"]
                    },
                    borderRadius: { "DEFAULT": "1rem", "lg": "2rem", "xl": "3rem", "full": "9999px" },
                    backgroundImage: {
                        'tape-pattern': "url('data:image/svg+xml,%3Csvg width=\\'20\\' height=\\'20\\' viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\'%3E%3Cpath d=\\'M0 0h20v20H0z\\' fill=\\'%23ffffff\\' fill-opacity=\\'0.4\\'/%3E%3C/svg%3E')",
                    }
                },
            },
        }
    </script>
    <style>
        /* Hide scrollbar for Chrome, Safari and Opera */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }

        /* Hide scrollbar for IE, Edge and Firefox */
        .no-scrollbar {
            -ms-overflow-style: none;
            /* IE and Edge */
            scrollbar-width: none;
            /* Firefox */
        }

        .paper-texture {
            background-color: #f8f6f6;
            background-image:
                linear-gradient(rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0.5)),
                url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100' height='100' filter='url(%23noise)' opacity='0.08'/%3E%3C/svg%3E");
        }

        .polaroid-shadow {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05), 0 0 0 1px rgba(0, 0, 0, 0.02);
        }

        .tape {
            background-color: rgba(255, 255, 255, 0.4);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(2px);
            transform: rotate(-2deg);
        }

        /* Horizontal scroll logic visualizer */
        .timeline-container {
            overflow-x: auto;
            scroll-behavior: smooth;
        }
    </style>
</head>

<body
    class="font-display bg-background-light dark:bg-background-dark text-gray-800 dark:text-gray-100 overflow-hidden h-screen flex flex-col paper-texture">
    <script>initTheme('{{ settings.theme }}');</script>
    <!-- Navbar -->
    {% include 'partials/navbar.html' %}
    <!-- Main Timeline Area -->
    <main class="flex-1 w-full h-full relative overflow-hidden flex items-center">
        <!-- Background decorative elements -->
        <div class="absolute top-20 right-20 w-64 h-64 bg-primary/5 rounded-full blur-3xl pointer-events-none"></div>
        <div class="absolute bottom-10 left-10 w-96 h-96 bg-primary/5 rounded-full blur-3xl pointer-events-none"></div>
        <!-- Horizontal Scrolling Container -->
        <!-- Note: In a real app, JS would map vertical scroll to horizontal here -->
        <div
            class="timeline-container w-full h-full flex items-center overflow-x-auto px-10 md:px-32 space-x-12 py-20 no-scrollbar">
            <!-- Start Marker -->
            <div class="flex-shrink-0 flex flex-col items-center justify-center space-y-4 w-48 text-center">
                <div
                    class="w-16 h-16 bg-white dark:bg-gray-800 rounded-full flex items-center justify-center shadow-lg border-2 border-primary/20">
                    <span class="material-icons text-primary text-3xl">play_arrow</span>
                </div>
                <div>
                    <h3 class="font-bold text-xl text-gray-800 dark:text-white">The Beginning</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400">Where it all started...</p>
                </div>
            </div>
            <!-- Central Line (Visual Only - spans across items) -->
            <!-- We will achieve the line effect by adding borders to the items or using a pseudo element. 
                 Since this is a flex container, a continuous line is tricky without absolute positioning.
                 Instead, we'll draw the line visually behind the cards using a long absolute div centered vertically. -->
            <div
                class="absolute left-0 right-0 top-1/2 h-0.5 bg-primary/20 border-t-2 border-dashed border-primary/30 w-[3000px] -z-10 transform -translate-y-1/2">
            </div>

            {% for memory in memories %}
            {% set is_top = loop.index0 % 2 == 0 %}
            <!-- Generated Card {{ loop.index0 }} -->
            <div class="relative flex-shrink-0 w-80 group {% if not is_top %}mt-48{% endif %}">
                <!-- Connector Line -->
                <div
                    class="absolute left-1/2 {% if is_top %}top-full{% else %}bottom-full{% endif %} h-12 w-0.5 bg-primary/30 border-l-2 border-dashed border-primary/30 -translate-x-1/2">
                </div>
                <!-- Node -->
                <div
                    class="absolute left-1/2 {% if is_top %}top-[calc(100%+2.8rem)]{% else %}bottom-[calc(100%+2.8rem)]{% endif %} w-4 h-4 bg-primary rounded-full -translate-x-1/2 ring-4 ring-white dark:ring-background-dark shadow-md z-10">
                </div>

                <a href="/memory/{{ memory.id }}">
                    <div
                        class="bg-white dark:bg-gray-800 p-4 pb-6 rounded-lg polaroid-shadow transform transition-transform duration-300 hover:-translate-y-2 hover:rotate-1 relative {% if is_top %}mb-12{% endif %}">
                        <!-- Tape -->
                        <div
                            class="absolute -top-3 left-1/2 -translate-x-1/2 w-24 h-8 bg-primary/10 backdrop-blur-sm transform -rotate-1 opacity-80 z-20">
                        </div>

                        <div
                            class="aspect-[4/3] w-full bg-gray-100 dark:bg-gray-700 rounded mb-4 overflow-hidden relative">
                            {% if memory.photos %}
                            <img alt="{{ memory.title }}" class="w-full h-full object-cover"
                                src="/static/uploads/{{ memory.id }}/{{ memory.photos[0] }}" />
                            {% else %}
                            <img alt="{{ memory.title }}" class="w-full h-full object-cover"
                                src="https://placehold.co/400x300?text=No+Photo" />
                            {% endif %}
                        </div>

                        <div class="space-y-2">
                            <div class="flex justify-between items-baseline">
                                <span class="font-display font-bold text-lg text-gray-900 dark:text-white">{{
                                    memory.title }}</span>
                                <span class="text-xs font-semibold text-primary bg-primary/10 px-2 py-1 rounded-full">{{
                                    memory.date }}</span>
                            </div>
                            <p
                                class="text-sm text-gray-600 dark:text-gray-300 font-display leading-relaxed line-clamp-3">
                                {{ memory.description }}
                            </p>
                        </div>
                    </div>
                </a>
            </div>
            {% endfor %}

            <!-- End Marker -->
            <div class="flex-shrink-0 flex flex-col items-center justify-center space-y-4 w-48 text-center ml-12">
                <a href="/add"
                    class="w-16 h-16 bg-white dark:bg-gray-800 rounded-full flex items-center justify-center shadow-lg border-2 border-primary/20 hover:bg-primary/5 transition-colors cursor-pointer group">
                    <span
                        class="material-icons text-primary/50 group-hover:text-primary transition-colors text-3xl">add</span>
                </a>
                <div>
                    <h3 class="font-bold text-xl text-gray-800 dark:text-white">To be continued...</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400">Add your next memory</p>
                </div>
            </div>
            <!-- Extra space for scrolling feel -->
            <div class="w-20 flex-shrink-0"></div>
        </div>
    </main>
    <!-- Floating Action Button -->
    <div class="fixed bottom-8 right-8 z-40">
        <a href="/add"
            class="bg-primary hover:bg-red-600 text-white w-14 h-14 rounded-full shadow-lg flex items-center justify-center transition-transform hover:scale-105 active:scale-95 group relative">
            <span class="material-icons text-2xl">add_a_photo</span>
            <span
                class="absolute right-full mr-4 bg-gray-900 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap">Add
                Memory</span>
        </a>
    </div>
    <!-- Scroll Indicator (Visual Only) -->
    <div class="fixed bottom-0 left-0 w-full h-1 bg-gray-200 dark:bg-gray-800">
        <div class="h-full bg-primary w-1/3 rounded-r-full"></div>
    </div>
</body>

</html>